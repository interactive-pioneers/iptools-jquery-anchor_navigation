/*! iptools-jquery-anchornav - v0.2.0 - 2016-12-02
* https://github.com/interactive-pioneers/iptools-jquery-anchornav
* Copyright Â© 2016 Interactive Pioneers GmbH; Licensed GPL */!function(a,b,c){"use strict";function d(b,c){this.element=a(b),this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.initialisable()&&this.initialise()}var e="iptAnchorNavigation",f={animEasing:"swing",animDuration:600,gapY:60,threshold:10,showHideNavAt:60},g={list:".anchor__nav__list",item:".anchor__nav__list__item__link",top:".anchor__nav__top",header:".header"};d.prototype={initialisable:function(){for(var b in g)if(0===a(g[b]).length)return!1;return!0},initialise:function(){this.addEvents(),this.getDimensions(),this.listWidth>=this.navWidth&&this.addScroller(),this.triggerScroll()},getDimensions:function(){var d=this;this.listWidth=0,this.element.find(g.item).each(function(){d.listWidth+=a(this).outerWidth(),a(this).data("offset",a(this).offset().left),a(this).data("width",a(this).outerWidth())}),this.windowHeight=a(b).height(),this.docHeight=a(c).height(),this.navWidth=this.element.width(),this.navOuterWidth=this.element.outerWidth(),this.settings.showHideNavAt=a(g.header).height()},onResize:function(a){var b=a.data;b.element.find(g.list).css({transform:""}),b.getDimensions(),b.listWidth>=b.navWidth?(b.element.hasClass("scrollable")||b.addScroller(),b.navWidth>=b.posX+b.listWidth&&(b.posX=b.navWidth-b.listWidth,b.element.find(g.list).css({transform:"translateX("+b.posX+"px)"}))):b.element.hasClass("scrollable")&&b.removeScroller(),b.triggerScroll()},addScroller:function(){var b=this;this.element.addClass("scrollable"),b.lArr=a("<a/>").addClass("scrollable__control scrollable__control--left").text("<"),b.rArr=a("<a/>").addClass("scrollable__control scrollable__control--right").text(">"),this.element.append(b.lArr,b.rArr),b.rArr.on("click",function(){a(b.element.find(g.item)[b.index+1]).trigger("click")}),b.lArr.on("click",function(){a(b.element.find(g.item)[b.index-1]).trigger("click")})},removeScroller:function(){this.element.removeClass("scrollable"),this.element.find(".scrollable__control").remove(),this.element.find(g.list).css({transform:"translateX(0)"})},triggerScroll:function(){a(b).scrollTop(a(b).scrollTop()+1),a(b).scrollTop(a(b).scrollTop()-1)},addEvents:function(){var c=this;this.element.find(g.item).on("click",this,c.go),this.element.find(g.top).on("click",this,c.go),a(b).on("scroll",this,c.onScroll),a(b).on("resize",this,c.onResize)},destroy:function(){this.removeScroller(),this.element.off("."+e),this.element.removeData("plugin_"+e)},go:function(b){function c(b){a("html, body").stop().animate({scrollTop:isNaN(Number(b))?a(b).offset().top-d.settings.gapY+d.settings.threshold:b},e)}var d=b.data,e={easing:d.settings.animEasing,duration:d.settings.animDuration};b.preventDefault(),c(b.target.hash)},onScroll:function(c){function d(b){if(this.hash){var c=a(this.hash).offset().top-i.settings.gapY,d=a(this.hash).height(),e=i.windowPos>=c-i.settings.gapY-i.windowHeight/2.5&&i.windowPos<c+d+i.settings.gapY-i.windowHeight/2.5;a(this).toggleClass("active",e),i.windowPos+i.windowHeight===i.docHeight&&(a(this[b]).hasClass("active")||(i.element.find(g.item).removeClass("active"),a(i.element.find(g.item)[b]).addClass("active"))),e&&(i.index=b)}}function e(){var b=i.element.find(g.item),c=b[0];if(!c)return!1;var d=a(c.hash).offset().top;return i.settings.showHideNavAt?i.windowPos>=i.settings.showHideNavAt:i.windowPos>=d-i.settings.gapY}function f(){return i.element.find(g.item).length}function h(){if(i.element.toggleClass("active",e()),i.element.hasClass("scrollable")){var b=a(i.element.find(g.item)[i.index]),c=i.navOuterWidth/2-b.data("offset")-b.data("width")/2;0>c?(i.posX=c,-(c-i.navWidth)>i.listWidth&&(i.posX=i.navWidth-i.listWidth)):i.posX=0,i.element.find(g.list).css({transform:"translateX("+i.posX+"px)"});var d=i.index>0,h=i.index<f()-1;i.lArr.toggleClass("active",d),i.rArr.toggleClass("active",h),i.element.toggleClass("before-shadow",d),i.element.toggleClass("after-shadow",h)}}var i=c.data;i.windowPos=a(b).scrollTop(),i.element.find(g.item).each(d),h()}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document);