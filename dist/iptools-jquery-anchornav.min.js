/*! iptools-jquery-anchornav - v0.3.0 - 2017-01-02
* https://github.com/interactive-pioneers/iptools-jquery-anchornav
* Copyright Â© 2017 Interactive Pioneers GmbH; Licensed GPL */!function(a,b,c){"use strict";function d(b,c){this.element=a(b),this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.initialisable()&&this.initialise()}var e="iptAnchorNavigation",f={animEasing:"swing",animDuration:600,gapY:60,threshold:10,showHideNavAt:!1,selectors:{list:".anchor__nav__list",item:".anchor__nav__list__item__link",top:".anchor__nav__top",header:".header"}};d.prototype={initialisable:function(){for(var b in this.settings.selectors)if(0===a(this.settings.selectors[b]).length)return!1;return!0},initialise:function(){this.addEvents(),this.getDimensions(),this.listWidth>=this.navWidth&&this.addScroller(),this.triggerScroll()},getDimensions:function(){var d=this;this.listWidth=0,this.element.find(this.settings.selectors.item).each(function(){d.listWidth+=a(this).outerWidth(),a(this).data("offset",a(this).offset().left),a(this).data("width",a(this).outerWidth())}),this.windowHeight=a(b).height(),this.docHeight=a(c).height(),this.navWidth=this.element.width(),this.navOuterWidth=this.element.outerWidth(),this.settings.showHideNavAt||(this.settings.showHideNavAt=a(this.settings.selectors.header).height())},onResize:function(a){var b=a.data;b.element.find(b.settings.selectors.list).css({transform:""}),b.getDimensions(),b.listWidth>=b.navWidth?(b.element.hasClass("scrollable")||b.addScroller(),b.navWidth>=b.posX+b.listWidth&&(b.posX=b.navWidth-b.listWidth,b.element.find(b.settings.selectors.list).css({transform:"translateX("+b.posX+"px)"}))):b.element.hasClass("scrollable")&&b.removeScroller(),b.triggerScroll()},addScroller:function(){var b=this;this.element.addClass("scrollable"),b.lArr=a("<a/>").addClass("scrollable__control scrollable__control--left").text("<"),b.rArr=a("<a/>").addClass("scrollable__control scrollable__control--right").text(">"),this.element.append(b.lArr,b.rArr),b.rArr.on("click",function(){a(b.element.find(b.settings.selectors.item)[b.index+1]).trigger("click")}),b.lArr.on("click",function(){a(b.element.find(b.settings.selectors.item)[b.index-1]).trigger("click")})},removeScroller:function(){this.element.removeClass("scrollable"),this.element.find(".scrollable__control").remove(),this.element.find(this.settings.selectors.list).css({transform:"translateX(0)"})},triggerScroll:function(){a(b).scrollTop(a(b).scrollTop()+1),a(b).scrollTop(a(b).scrollTop()-1)},addEvents:function(){var c=this;this.element.find(this.settings.selectors.item).on("click",this,c.go),this.element.find(this.settings.selectors.top).on("click",this,c.go),a(b).on("scroll",this,c.onScroll),a(b).on("resize",this,c.onResize)},destroy:function(){this.removeScroller(),this.element.off("."+e),this.element.removeData("plugin_"+e)},go:function(b){function c(b){a("html, body").stop().animate({scrollTop:isNaN(Number(b))?a(b).offset().top-d.settings.gapY+d.settings.threshold:b},e)}var d=b.data,e={easing:d.settings.animEasing,duration:d.settings.animDuration};b.preventDefault(),c(b.target.hash)},onScroll:function(c){function d(b){if(this.hash){var c=a(this.hash).offset().top-h.settings.gapY,d=a(this.hash).height(),e=h.windowPos>=c-h.settings.gapY-h.windowHeight/2.5&&h.windowPos<c+d+h.settings.gapY-h.windowHeight/2.5;a(this).toggleClass("active",e),h.windowPos+h.windowHeight===h.docHeight&&(a(this[b]).hasClass("active")||(h.element.find(h.settings.selectors.item).removeClass("active"),a(h.element.find(h.settings.selectors.item)[b]).addClass("active"))),e&&(h.index=b)}}function e(){var b=h.element.find(h.settings.selectors.item),c=b[0];if(!c)return!1;var d=a(c.hash).offset().top;return h.settings.showHideNavAt?h.windowPos>=h.settings.showHideNavAt:h.windowPos>=d-h.settings.gapY}function f(){return h.element.find(h.settings.selectors.item).length}function g(){if(h.element.toggleClass("active",e()),h.element.hasClass("scrollable")){var b=a(h.element.find(h.settings.selectors.item)[h.index]),c=h.navOuterWidth/2-b.data("offset")-b.data("width")/2;0>c?(h.posX=c,-(c-h.navWidth)>h.listWidth&&(h.posX=h.navWidth-h.listWidth)):h.posX=0,h.element.find(h.settings.selectors.list).css({transform:"translateX("+h.posX+"px)"});var d=h.index>0,g=h.index<f()-1;h.lArr.toggleClass("active",d),h.rArr.toggleClass("active",g),h.element.toggleClass("before-shadow",d),h.element.toggleClass("after-shadow",g)}}var h=c.data;h.windowPos=a(b).scrollTop(),h.element.find(h.settings.selectors.item).each(d),g()}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document);